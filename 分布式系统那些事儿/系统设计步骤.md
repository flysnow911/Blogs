设计一个系统的步骤：
#### 1.面向需求确定技术模型：
	与钱有关，追求强一致性的：CP。
	没有强一致性要求：AP。
	
#### 2.通过系统的规模，期望值，决定技术选型。
	原则：小公司，在满足需求的情况下尽量简单，减少对外依赖。
		  大公司，体制成熟，考虑未来的扩展需求，可以相对任性。
	
	服务治理：Eureka,zk，nacos。
	BD：Mysql，es hbase
	异步请求：引入mq，还是用deferedResult
	分布式锁：基于zk，etcd的分布式锁，redis的分布式锁，单点系统的话 syncnized,lock。
	RPC: 规模小，restful接口，feign.
		 规模大 dubbo
		 
#### 3.模块划分
	单体应用 
	微服务
		AKF拆分原则（多系统设计原则）
		X轴：单系统的水平扩展
		Y轴：系统的拆分
			高内聚，低耦合，每个系统完成一套独立的服务
			每个系统由一个小团队维护
		Z轴：数据分区
			数据热点区域可以扩展服务。尤其是与地域相关的应用服务，如打车。
		例子：打车软件突然火了，先从X轴开始扩展，集群部署。奖励增加，用户激增，系统开始再始变慢了，经过分析，是用户流浪和下单量很大，并且抢购时，瞬时流量相当大。所以就需要把系统拆，客户服务，订单服务，支付服务，
	
#### 4.模块通信协议
    长连接，短连接，通信数据量大小。
	rest风格 dubbo协议

**以上4点，确定基本技术选型。**
	
#### 5.服务设计
	幂等：有写库的操作，就一定就考虑幂等。
	补偿：判断哪些服务有可能需要补偿。自动补偿，人工补偿。
	容错：系统自身别跑挂了。
**系统，补偿设计的好，生产问题会少。**
#### 6.安全
	对外接口：
		防高频：限制ip
		防重放：token过期机制
		防伪造：rsa签名
		防篡改：请求md5加盐
#### 7.性能
	识别访问频繁的接口，做压测。
	压测结果满足不了性能需求的需要优化。
	
#### 8.监控
	应用的健康，接口成功率，业务成功率
	硬件：cpu，memory，网卡，硬盘